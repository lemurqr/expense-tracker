{% extends 'base.html' %}
{% block content %}
<section class="card">
  <h2>{{ 'Edit Expense' if expense else 'Add Expense' }}</h2>
  <form method="post" class="form-grid">
    <input type="hidden" name="month" value="{{ filter_params.month if filter_params else "" }}">
    <input type="hidden" name="start" value="{{ filter_params.start if filter_params else "" }}">
    <input type="hidden" name="end" value="{{ filter_params.end if filter_params else "" }}">
    {% if expense and expense.updated_at %}<input type="hidden" name="updated_at" value="{{ expense.updated_at }}">{% endif %}
    <label>Date
      <input type="date" name="date" value="{{ expense.date if expense else '' }}" required>
    </label>
    <label>Amount
      <input type="number" step="0.01" name="amount" value="{{ expense.amount if expense else '' }}" required>
      <small>Use negative for expenses, positive for refunds/credits.</small>
    </label>
    <label>Category
      <select name="category_id">
        <option value="">Uncategorized</option>
        {% for category in categories %}
          <option value="{{ category.id }}" {% if expense and expense.category_id == category.id %}selected{% endif %}>{{ category.name }}</option>
        {% endfor %}
      </select>
    </label>
    <label>Description
      <input name="description" value="{{ expense.description if expense else '' }}">
    </label>
    <label>Paid by
      <select name="paid_by">
        <option value="" {% if not expense or not expense.paid_by %}selected{% endif %}>-- Select --</option>
        <option value="DK" {% if expense and expense.paid_by == 'DK' %}selected{% endif %}>DK</option>
        <option value="YZ" {% if expense and expense.paid_by == 'YZ' %}selected{% endif %}>YZ</option>
      </select>
    </label>
    <button type="submit">Save</button>
  </form>
</section>
{% endblock %}
